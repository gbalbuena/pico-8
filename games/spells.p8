pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

classes = { 'paladin', 'warlock', 'rogue' }
spells = {
  { lvl=1, name="bless", prepared=false },
  { lvl=1, name="ceremony", prepared=false },
  { lvl=1, name="command", prepared=false },
  { lvl=1, name="compelled duel", prepared=false },
  { lvl=1, name="cure wounds", prepared=false }
}

function _paladin(x,y)
  spr( 0, x+0, y+0)
  spr( 1, x+8, y+0)
  spr(16, x+0, y+8)
  spr(17, x+8, y+8)
  spr(32, x+0, y+16)
  spr(33, x+8, y+16)
  spr(48, x+0, y+24)
  spr(49, x+8, y+24)

  spr( 0, x+24,  y+0, 1.0, 1.0, true)
  spr( 1, x+16,  y+0, 1.0, 1.0, true)
  spr(16, x+24,  y+8, 1.0, 1.0, true)
  spr(17, x+16,  y+8, 1.0, 1.0, true)
  spr(32, x+24, y+16, 1.0, 1.0, true)
  spr(33, x+16, y+16, 1.0, 1.0, true)
  spr(48, x+24, y+24, 1.0, 1.0, true)
  spr(49, x+16, y+24, 1.0, 1.0, true)
end

function _warlock(x,y)
  spr( 2, x+8, y+0)
  spr(18, x+8, y+8)
  spr(34, x+8, y+16)
  spr(50, x+8, y+24)

  spr(2,  x+15,  y+0, 1.0, 1.0, true)
  spr(18, x+15,  y+8, 1.0, 1.0, true)
  spr(34, x+15, y+16, 1.0, 1.0, true)
  spr(50, x+15, y+24, 1.0, 1.0, true)
end

function _rogue(x,y)
  spr( 3, x+0, y+0)
  spr( 4, x+8, y+0)
  spr(19, x+0, y+8)
  spr(20, x+8, y+8)
  spr(48, x+0, y+16)
  spr(36, x+8, y+16)
  spr(48, x+0, y+24)
  spr(50, x+8, y+24)

  spr( 3, x+24,  y+0, 1.0, 1.0, true)
  spr( 4, x+16,  y+0, 1.0, 1.0, true)
  spr(19, x+24,  y+8, 1.0, 1.0, true)
  spr(20, x+16,  y+8, 1.0, 1.0, true)
  spr(48, x+24, y+16, 1.0, 1.0, true)
  spr(36, x+16, y+16, 1.0, 1.0, true)
  spr(48, x+24, y+24, 1.0, 1.0, true)
  spr(50, x+16, y+24, 1.0, 1.0, true)
end

function main_screen_update()
  if (btnp(0)) main_screen.selected = main_screen.selected - 1
  if (btnp(1)) main_screen.selected = main_screen.selected + 1
  if (main_screen.selected > #classes) main_screen.selected = #classes
  if (main_screen.selected == 0) main_screen.selected = 1
  
  if (btnp(5)) ux.selected_screen = ux.selected_screen + 1
end

function main_screen_draw()
  _x =(128/2) - 16
  _y =(128/2) - 16
  if (classes[main_screen.selected] == 'paladin') then
    _paladin(_x,_y)
  end
  if (classes[main_screen.selected] == 'warlock') then
    _warlock(_x,_y)
  end
  if (classes[main_screen.selected] == 'rogue') then
    _rogue(_x,_y)
  end
  print(classes[main_screen.selected], 50, 82, 7 )
  print(main_screen.selected, 0, 0, 7 )
end

main_screen = {
  selected = 1,
  draw = main_screen_draw,
  update = main_screen_update
}



function draw_sl()
  print('lvl name', 2, 2, 7)
  y=0
  for key, spell in pairs(spells) do
    y = y + 8
    
    if (spells[selected_spell] == spell) print(">", 2, y + 2, 7)
    
    if spell.prepared then
      print(spell.name, 6 + 8, y + 2, 8)
      print(spell.lvl, 8, y + 2, 8)
    else
      print(spell.name, 6 + 8, y + 2, 7)
      print(spell.lvl, 8, y + 2, 7)
    end
    
  end
end

function update_sl()
  if (btnp(2)) selected_spell = selected_spell - 1
  if (btnp(3)) selected_spell = selected_spell + 1
  if (btnp(5)) spells[selected_spell].prepared = not spells[selected_spell].prepared
end
selected_spell = 1
spells_list = {
  
  draw = draw_sl,
  update = update_sl
}



-- spells


ux = {
  selected_screen = 1
}
screens = {
  main_screen,
  spells_list
}

function _update()  
  screens[ux.selected_screen].update()
end

function _draw()
  cls(1)
  screens[ux.selected_screen].draw()
end

__gfx__
00000000000000000000000700000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000600000000000000700000000000000560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000007600000000000000700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000077600000000000000700005677775000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777000000000000000705777777777600070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006770000000000000000706777777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006770000000000000000700777777007777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00067770000000000070005700077777000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00067770000000070077007700006777777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00677770000000770000000000000006777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00677777000007770005777700000000006775070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00677777700077770077777700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00677777777777770777700700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00677777777777770005770700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00677777777777770000077700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00067777777777770000005700000000000006770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007777770777770075000000000000000007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006777760777770750777700000000000005070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000777760760677500707700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000006760770000005707700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000700777000007005700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000777700007005700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000777700000005700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077777700000005700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007777700000000700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000777700000000700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077700000000700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000077700000000700000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000007700000000500000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000700000000500000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000700000000500000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000500000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
