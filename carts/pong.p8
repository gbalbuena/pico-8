pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

-- player = { score=0, lives=3 }
-- score
score=0
lives=3

-- paddle
-- paddle = { x=52,y=122,w=24,h=4,speed=5 }

padx=52
pady=122
padw=24
padh=4
padspeed=5

-- ball
-- ball = { x=64,y=64,size=3,xdir=5,ydir=-3 }
ballx=64
bally=64
ballsize=3
ballxdir=5
ballydir=-3

function movepaddle()
  if btn (0) then
    padx-= padspeed
  elseif btn(1) then
    padx+= padspeed
  end
end

function moveball()
  ballx+=ballxdir
  bally+=ballydir
end

function bounceball()
  -- left
  if ballx < ballsize then
    ballxdir=-ballxdir
    sfx(0)
  end

  -- right
  if ballx > 128-ballsize then
    ballxdir=-ballxdir
    sfx(0)
  end

  -- top
  if bally < ballsize then
    ballydir=-ballydir
    sfx(0)
  end
end

function bouncepaddle()
  if ballx>=padx and
    ballx<=padx+padw and
    bally>pady then
    sfx(0)
    score+=10 -- increase the score on a hit!
    ballydir=-ballydir
  end
end

function losedeadball()
  if bally>128-ballsize then
    if lives>0 then
      -- next life
      sfx(3)
      bally=24
      lives-=1
    else
      -- game over
      -- ballydir=0 -- don't move
      -- ballxdir=0
      bally=64
      lives=3
      score=0
    end
  end
end

function _update()
  movepaddle()
  bounceball()
  bouncepaddle()
  moveball()
  losedeadball()
end

function _draw()
  -- clear the screen
  cls(3)

  -- draw the score
  print(score, 12, 6, 15)

  -- draw the lives
  for i=1,lives do
    spr(4, 90+i*8, 4)
  end

  -- draw the paddle
  rectfill(padx,pady, padx+padw, pady+padh, 15)

  -- draw the ball
  circfill(ballx,bally,ballsize,15)
end
__gfx__
000000000000000000000000000000000ff0ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000f88f88f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000f88888f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000f888f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000f8f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010100003f0503f050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000003f0503c0503905036050330502f0500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
